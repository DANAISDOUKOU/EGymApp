<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

<title>gymDetails</title>
</head>
 <style>
 body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #87CEFA, #EFEFEF);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        h1 {
            font-size: 28px;
            margin-top: 20px;
        }

        h2 {
            font-size: 24px;
            margin-top: 20px;
        }

        h3 {
            font-size: 20px;
            margin-top: 20px;
        }

        form {
            margin-top: 20px;
        }

        button {
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 16px;
            cursor: pointer;
            margin-top: 10px;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        li {
            margin-top: 10px;
        }

        p {
            font-size: 18px;
            margin-top: 10px;
        }

        a {
            text-decoration: none;
            color: #007BFF;
        }
        .canceled-text {
        color: red;
    }
 </style>
<body>
    <h1 th:text="${gym.gym_name}"></h1>
    <h2>Fitness Programs:</h2>
    <div th:if="${not alreadyMember}">
     <form th:action="@{/gym/subscribe}" method="post">
    	<h1>Do you want to be a member?</h1>
        <input type="hidden" name="gymId" th:value="${gym.gym_id}" />
        <button type="submit">Subscribe</button>
    </form>
    </div>
    <div th:if="${not hasAlreadyMembershipType and alreadyMember}">
     <form th:action="@{/gym/selectMembership}" method="post">
    	<h1>Do you want a specific membershipType?</h1>
    	<input type="hidden" name="gymId" th:value="${gym.gym_id}" />
    	<ul>
	    	<li th:each="membership :${memberships}">
	    		<input type="hidden" name="membershipId" th:value="${membership.getMembership_type_id}"/>
	    		<button type="submit" th:text="${membership.getMembership_type_name}"></button>
    		</li>
    	</ul>
    </form>
    </div>
     <div th:if="${existingMembership != null}">
     	<h1> Your existing membership type:</h1>
     	<input type="hidden" name="gymId" th:value="${gym.gym_id}" />
     	<p th:text="${existingMembership.membership_period}"></p>
     	<div th:if="${remainingLessons}">
			<p>Remaining Lessons: <span th:text="${remainingLessons}"></span></p>
    	</div>
    	<div th:if="${expireAt}">
			<p>Expire At: <span th:text="${expireAt}"></span></p>
    	</div>
     </div> 
        <div th:if="${not #lists.isEmpty(programList)}">
	    <li th:each="program: ${programList}">
	        <span th:text="${program.work_out_date}"></span>
			 <ul>
	             <th:block th:each="classOfSchedule: ${workoutList.get(program.work_out_date)}">
	             	<li th:class="${classOfSchedule.is_canceled} ? 'canceled-text' : ''">
	             		<td th:text="${classOfSchedule.time_start} +' - '+${classOfSchedule.time_end}"></td>
						<td><a th:href="@{/workout/{workoutId}/class/{classOfScheduleId}/schedule/{scheduleId}(workoutId=${classOfSchedule.workout.workoutId}, classOfScheduleId=${classOfSchedule.classOfScheduleId}, scheduleId=${program.schedule_id})}"
       						th:text="${classOfSchedule.workout.getName()}">Details</a>
						</td>
					</li>
	        	</th:block>
	        </ul>	
	    </li>
	 </div>
	 <form th:action="@{/rate-gym/{gymId}(gymId=${gym.gym_id})}" method="post">
    	<input type="number" name="rating" min="1" max="5" required />
    	<button type="submit">Rate Gym</button>
	</form>
    </ul>
	<a th:href="@{http://localhost:8080/athlete/history(gymId=${gym.gym_id})}">History of Classes</a>
	
</body>
</html>